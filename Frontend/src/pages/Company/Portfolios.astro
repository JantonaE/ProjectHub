---
import Layout from '../../layouts/Layout.astro';
import SideBar from '../../components/SideBar.astro';
import SideBar2 from '../../components/SideBar2.astro';
//http://127.0.0.1:8000/Companies/Portfolios/65e846ee1a79848c6df345be
const url = "http://127.0.0.1:8000";
//const { userLogged, params, mapa } = Astro.props;
const userLogged = "";
const companyId = "65f09026adc0d6e28f9f157c"
let data;
async function fetchPortfolios() {
    try {
      const response = await fetch(`${url}/Companies/Portfolios/${companyId}`);
      if (response.ok) {
        data = await response.json();
        
      } else {
        throw new Error('Error al obtener portfolios');
      }
    } catch (error) {
      console.error(error);
    }
  }

  await fetchPortfolios();
  
---
<div class="flex">
    <div class="w-1/5 h-full fixed inset-y-0 left-0">
        <SideBar2 />
    </div>
    <div class="w-4/5 h-full ml-64 overflow-auto">
        
            <div class="flex flex-wrap justify-center my-14">
                <div class="flex border p-2 border-blue-950">
                        <p class="p-2">Title</p>
                        <p class="p-2">Code</p>
                        <p class="p-2">Start Date</p>
                        <p class="p-2">Real Start Date</p>
                        <p class="p-2">Finish Date</p>
                        <p class="p-2">Real Finish Date</p>
                        <p class="p-2">Risk</p>
                        <p class="p-2">Priority</p>
                        <p class="p-2">Strategic Goal</p>
                </div>
              {

                data.map((portfolio) => (
                    <div class="flex border p-2 border-blue-950">
                        <p class="p-2">{portfolio.title}</p>
                        <p class="p-2">{portfolio.code}</p>
                        <p class="p-2">{portfolio.start_date}</p>
                        <p class="p-2">{portfolio.start_real_date}</p>
                        <p class="p-2">{portfolio.finish_date}</p>
                        <p class="p-2">{portfolio.finish_real_date}</p>
                        <p class="p-2">{portfolio.risk}</p>
                        <p class="p-2">{portfolio.priority}</p>
                        <p class="p-2">{portfolio.strategic_goal}</p>
                        {/* Otros datos del portfolio */}
                    </div>
                ))
              }
            </div>
    </div>
</div>


